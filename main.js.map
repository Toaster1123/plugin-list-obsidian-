{
  "version": 3,
  "sources": ["main.ts", "src/entities/settings/defaults.ts", "src/features/settings-tab/ui/settings-tab.ts", "src/features/settings-tab/ui/file-selector-wrapper.ts", "src/features/settings-tab/ui/file-selector-input.ts", "src/features/settings-tab/lib/split-file-name.ts", "src/features/settings-tab/ui/file-selector-dropdown.ts", "src/features/log-writer/ui/log-writer.ts"],
  "sourcesContent": ["import { Plugin } from \"obsidian\";\r\nimport { DEFAULT_SETTINGS, PluginListAutoSettings } from \"./src/entities\";\r\nimport { LogWriter, SettingsTab } from \"./src/features/\";\r\n\r\nexport default class PluginListAuto extends Plugin {\r\n  settings!: PluginListAutoSettings;\r\n  logWriter!: LogWriter;\r\n\r\n  async onload() {\r\n    await this.loadSettings();\r\n    this.logWriter = new LogWriter(this.app);\r\n    this.addSettingTab(new SettingsTab(this.app, this));\r\n    await this.logWriter.writeData(this.settings.logFile);\r\n  }\r\n\r\n  async loadSettings() {\r\n    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());\r\n    console.log(\"Succes load \" + this.settings.logFile);\r\n  }\r\n\r\n  async saveSettings() {\r\n    await this.saveData(this.settings);\r\n  }\r\n  onunload() {\r\n    console.log(\"Succes unload\");\r\n  }\r\n}\r\n", "import type { PluginListAutoSettings } from \"./types\";\r\n\r\nexport const DEFAULT_SETTINGS: PluginListAutoSettings = {\r\n  logFile: \"\",\r\n};\r\n", "import { App, PluginSettingTab } from \"obsidian\";\r\nimport { PluginListAutoSettings } from \"../../../entities\";\r\nimport { FileSelectorWrapper } from \"./file-selector-wrapper\";\r\nimport { sortFiles } from \"../lib\";\r\n\r\ninterface SettingsTabPlugin {\r\n  settings: PluginListAutoSettings;\r\n  saveSettings(): Promise<void>;\r\n}\r\n\r\nexport class SettingsTab extends PluginSettingTab {\r\n  private plugin: SettingsTabPlugin;\r\n\r\n  constructor(app: App, plugin: SettingsTabPlugin) {\r\n    super(app, plugin as any);\r\n    this.plugin = plugin;\r\n  }\r\n\r\n  display(): void {\r\n    const { containerEl } = this;\r\n    containerEl.empty();\r\n    containerEl.createEl(\"h2\", { text: \"Auto Plugin List\" });\r\n    const root = this.app.vault.getFiles();\r\n    new FileSelectorWrapper(\r\n      containerEl.createDiv(),\r\n      this.plugin.settings.logFile,\r\n      root,\r\n      async (value) => {\r\n        this.plugin.settings.logFile = value;\r\n        await this.plugin.saveSettings();\r\n      }\r\n    );\r\n  }\r\n}\r\n", "import { Setting, TFile } from \"obsidian\";\r\nimport { FileSelectorInput } from \"./file-selector-input\";\r\nimport { FileSelectorDropdown } from \"./file-selector-dropdown\";\r\nimport { splitFileName } from \"../lib\";\r\n\r\nexport class FileSelectorWrapper {\r\n  inputComponent!: FileSelectorInput;\r\n\r\n  constructor(\r\n    container: HTMLDivElement,\r\n    initialValue = \"\",\r\n    files: TFile[],\r\n    onChange: (value: string) => void\r\n  ) {\r\n    const setting = new Setting(container)\r\n      .setName(\"Log File\")\r\n      .setDesc(\"Select the log file to store the plugin list.\");\r\n\r\n    const wrapper = setting.controlEl.createDiv({\r\n      cls: \"file-selector-wrapper\",\r\n    });\r\n\r\n    const dropdown = new FileSelectorDropdown(files, (file) => {\r\n      this.inputComponent.setValue(splitFileName(file)); // \u0442\u043E\u043B\u044C\u043A\u043E \u0438\u043C\u044F \u0431\u0435\u0437 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043D\u0438\u044F\r\n      onChange(file.path); // \u0441\u043E\u0445\u0440\u0430\u043D\u044F\u0435\u043C \u043F\u043E\u043B\u043D\u044B\u0439 \u043F\u0443\u0442\u044C\r\n      wrapper.classList.remove(\"is-open\");\r\n    });\r\n\r\n    this.inputComponent = new FileSelectorInput(\r\n      initialValue ? splitFileName(initialValue) : \"\",\r\n      (val) => {}\r\n    );\r\n\r\n    this.inputComponent.input.addEventListener(\"focus\", () => {\r\n      const value = this.inputComponent.input.value;\r\n      dropdown.filter(value);\r\n      wrapper.classList.add(\"is-open\");\r\n    });\r\n\r\n    this.inputComponent.input.addEventListener(\"input\", (e) => {\r\n      const value = (e.target as HTMLInputElement).value;\r\n      dropdown.filter(value);\r\n      wrapper.classList.add(\"is-open\");\r\n    });\r\n\r\n    document.addEventListener(\"pointerdown\", (e) => {\r\n      if (!wrapper.contains(e.target as Node)) {\r\n        wrapper.classList.remove(\"is-open\");\r\n      }\r\n    });\r\n\r\n    wrapper.appendChild(this.inputComponent.inputWrapper);\r\n    wrapper.appendChild(dropdown.dropdownWrapper);\r\n  }\r\n}\r\n", "export class FileSelectorInput {\r\n  inputWrapper: HTMLDivElement;\r\n  input: HTMLInputElement;\r\n\r\n  constructor(value: string, onChange: (value: string) => void) {\r\n    this.inputWrapper = document.createElement(\"div\");\r\n    this.inputWrapper.classList.add(\"file-selector-wrapper\");\r\n\r\n    this.input = document.createElement(\"input\");\r\n    this.input.type = \"text\";\r\n    this.input.value = value;\r\n    this.input.placeholder = \"Select a file...\";\r\n    this.input.classList.add(\"file-selector-input\");\r\n\r\n    this.input.addEventListener(\"input\", (e) => {\r\n      const target = e.target as HTMLInputElement;\r\n      onChange(target.value);\r\n    });\r\n\r\n    this.inputWrapper.appendChild(this.input);\r\n  }\r\n\r\n  setValue(value: string) {\r\n    this.input.value = value;\r\n  }\r\n}\r\n", "import { TFile } from \"obsidian\";\n\nexport const splitFileName = (file?: TFile | string) => {\n  if (!file) return \"\";\n\n  const name = typeof file === \"string\" ? file : file.name || file.path;\n\n  const parts = name.split(\".\");\n  if (parts.length > 1) parts.pop();\n  return parts.join(\".\");\n};\n", "import { TFile } from \"obsidian\";\r\nimport { splitFileName } from \"../lib\";\r\n\r\nexport class FileSelectorDropdown {\r\n  dropdownWrapper: HTMLDivElement;\r\n  private items: TFile[];\r\n  private onChange: (file: TFile) => void;\r\n\r\n  constructor(items: TFile[], onChange: (file: TFile) => void) {\r\n    this.items = items;\r\n    this.onChange = onChange;\r\n\r\n    this.dropdownWrapper = document.createElement(\"div\");\r\n    this.dropdownWrapper.classList.add(\"file-selector-dropdown\");\r\n\r\n    this.render(items);\r\n  }\r\n\r\n  render(files: TFile[]) {\r\n    this.dropdownWrapper.empty();\r\n\r\n    const sorted = [...files].sort((a, b) =>\r\n      splitFileName(a).localeCompare(splitFileName(b), undefined, {\r\n        sensitivity: \"base\",\r\n      })\r\n    );\r\n\r\n    for (const file of sorted) {\r\n      const el = document.createElement(\"div\");\r\n      el.classList.add(\"dropdown-item\");\r\n      el.textContent = splitFileName(file);\r\n      el.onclick = () => this.onChange(file);\r\n      this.dropdownWrapper.appendChild(el);\r\n    }\r\n  }\r\n\r\n  filter(query: string) {\r\n    const q = query.toLowerCase();\r\n    const filtered = this.items.filter((f) =>\r\n      splitFileName(f).toLowerCase().includes(q)\r\n    );\r\n    this.render(filtered);\r\n  }\r\n}\r\n", "import { App, TFile } from \"obsidian\";\n\nexport class LogWriter {\n  constructor(private app: App) {}\n\n  async writeData(path?: string) {\n    if (!path) return;\n    console.log(\"file by path \", this.app.vault.getFileByPath(path));\n    console.log(\"files \", this.app.vault.getFolderByPath(path));\n    const file = this.app.vault.getAbstractFileByPath(path);\n    this.app.vault.getFiles().forEach((f) => console.log(f.path));\n\n    if (!(file instanceof TFile)) {\n      console.warn(\"Log file not found or not a file:\", path);\n      return;\n    }\n\n    await this.app.vault.append(file, \"\u043F\u0440\u0438\u0432\u0435\u0442\\n\");\n  }\n}\n"],
  "mappings": "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",
  "names": ["import_obsidian", "import_obsidian", "import_obsidian"]
}
